#!/bin/bash

# Команда для вставки нового элемента (папки) в последовательность из названий папок

# Логика команды
# Если у меня папки называются: 1-a, 2-a, 3-a
# А мне нужно вставить папку 2-b тогда все последующие номера должны увеличиться на единицу: переименовать последующие папки
# Должно получиться: 1-a, 2-b, 3-a (вместо 2-a), 4-a (вместо 3-a)

# Синтаксис команды
# ins <имя папки> 

# Проверка полученных параметров скрипта
if [[ $# -ne 1 || ! -d "$1" ]]; then
    echo "Укажите базовую папку для начала нумерации"
    exit 1
fi

# Получаю имя папки для вставки
folder="$1"


# Исключаю из поиска папки . и ..
ignore=(-not -name "." -not -name "..")
find_args=(-maxdepth 1 "${ignore[@]}")

# Создаю отсортированный массив из имен папок
arr=($(find . "${find_args[@]}" -type d | sort -V | sed 's|.*/||'))

for el in "${arr[@]}"; do
    echo "$el"
done
